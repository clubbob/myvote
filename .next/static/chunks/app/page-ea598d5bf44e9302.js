(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{150:function(e,t,a){Promise.resolve().then(a.bind(a,5793))},3038:function(e,t,a){"use strict";var n=a(3677);a.o(n,"useParams")&&a.d(t,{useParams:function(){return n.useParams}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}})},5793:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var n=a(1443),s=a(7954),l=a(9277),r=a(2002),d=a(3038),i=a(437),c=a(3490),o=a(7088),u=a(6613);function p(){let[e,t]=(0,s.useState)([]),{user:a}=(0,i.t)(),p=(0,d.useRouter)();(0,s.useEffect)(()=>{(async()=>{let e=(0,l.IO)((0,l.hJ)(r.db,"polls"),(0,l.ar)("isPublic","==",!0),(0,l.Xo)("createdAt","desc"));t((await (0,l.PL)(e)).docs.map(e=>{var t,a,n,s,l;let r=e.data();return{id:e.id,title:r.title,category:r.category,createdAt:null!==(s=null===(t=r.createdAt)||void 0===t?void 0:t.toDate().toISOString())&&void 0!==s?s:null,deadline:(null===(n=r.deadline)||void 0===n?void 0:null===(a=n.toDate)||void 0===a?void 0:a.call(n))instanceof Date?r.deadline.toDate().toISOString():"string"==typeof r.deadline?r.deadline:null,maxParticipants:null!==(l=r.maxParticipants)&&void 0!==l?l:null}}))})()},[]);let m=e=>{if(!a){alert("로그인 후 투표 가능합니다."),p.push("/login");return}p.push("/polls/".concat(e))};return(0,n.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[(0,n.jsxs)("h1",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[(0,n.jsx)("span",{children:"\uD83D\uDD25"})," 실시간 투표 목록"]}),0===e.length?(0,n.jsx)("p",{className:"text-gray-500",children:"공개된 투표가 없습니다."}):(0,n.jsx)("ul",{className:"space-y-4",children:e.map(e=>{let t=e.createdAt?(0,c.WU)(new Date(e.createdAt),"yyyy. M. d.",{locale:u.ko}):"날짜 없음",a=e.deadline?"".concat((0,c.WU)(new Date(e.deadline),"yyyy. M. d.",{locale:u.ko})," (D-").concat((0,o.w)(new Date(e.deadline),new Date),")"):"마감일 없음";return(0,n.jsx)("li",{className:"border border-gray-200 rounded-xl bg-white shadow-sm hover:shadow-md transition cursor-pointer",onClick:()=>m(e.id),children:(0,n.jsxs)("div",{className:"block p-4",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,n.jsxs)("div",{className:"text-sm text-gray-700 space-y-1",children:[(0,n.jsxs)("p",{children:["\uD83D\uDCC2 ",(0,n.jsx)("span",{className:"font-bold",children:"카테고리:"})," ",e.category]}),(0,n.jsxs)("p",{children:["\uD83D\uDEE0️ ",(0,n.jsx)("span",{className:"font-bold",children:"제작일:"})," ",t]}),(0,n.jsxs)("p",{children:["⏰ ",(0,n.jsx)("span",{className:"font-bold",children:"마감일:"})," ",a]}),(0,n.jsxs)("p",{children:["\uD83D\uDC65 ",(0,n.jsx)("span",{className:"font-bold",children:"참여제한:"})," ",e.maxParticipants?"".concat(e.maxParticipants,"명"):"제한 없음"]})]})]})},e.id)})})]})}},2002:function(e,t,a){"use strict";a.d(t,{I:function(){return i},db:function(){return c}});var n=a(4991),s=a(7568),l=a(9277),r=a(3521);let d=(0,n.ZF)({apiKey:"AIzaSyAws91QdnLflrzzHG9Nqh6kuc-cF5fJF9w",authDomain:"myvote-d6e8a.firebaseapp.com",projectId:"myvote-d6e8a",storageBucket:"myvote-d6e8a.appspot.com",messagingSenderId:"419357195756",appId:"1:419357195756:web:861b197a9d92d06dc914c9"}),i=(0,s.v0)(d),c=(0,l.ad)(d);(0,r.cF)(d)},437:function(e,t,a){"use strict";a.d(t,{t:function(){return n}});let n=(0,a(7957).U)(e=>({user:null,loading:!0,setUser:t=>e({user:t}),setLoading:t=>e({loading:t})}))}},function(e){e.O(0,[126,411,114,289,878,323,744],function(){return e(e.s=150)}),_N_E=e.O()}]);