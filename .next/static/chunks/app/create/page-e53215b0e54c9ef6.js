(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[572],{4477:function(e,t,r){Promise.resolve().then(r.bind(r,5862))},3038:function(e,t,r){"use strict";var n=r(3677);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},5862:function(e,t,r){"use strict";let n;r.r(t),r.d(t,{default:function(){return f}});var s=r(1443),l=r(7954),a=r(9277),u=r(2002),i=r(437),o=r(3038),d={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let c=new Uint8Array(16),m=[];for(let e=0;e<256;++e)m.push((e+256).toString(16).slice(1));var p=function(e,t,r){if(d.randomUUID&&!t&&!e)return d.randomUUID();let s=(e=e||{}).random??e.rng?.()??function(){if(!n){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n=crypto.getRandomValues.bind(crypto)}return n(c)}();if(s.length<16)throw Error("Random bytes length must be >= 16");if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=s[e];return t}return function(e,t=0){return(m[e[t+0]]+m[e[t+1]]+m[e[t+2]]+m[e[t+3]]+"-"+m[e[t+4]]+m[e[t+5]]+"-"+m[e[t+6]]+m[e[t+7]]+"-"+m[e[t+8]]+m[e[t+9]]+"-"+m[e[t+10]]+m[e[t+11]]+m[e[t+12]]+m[e[t+13]]+m[e[t+14]]+m[e[t+15]]).toLowerCase()}(s)};let x=["팬덤","연예\xb7사랑","방송\xb7채널","패션\xb7뷰티","음식\xb7요리","취미\xb7여행","일상","사회\xb7문화","기술","정치","경제","교육","자유주제"];function f(){let e=(0,o.useRouter)(),{user:t}=(0,i.t)(),[r,n]=(0,l.useState)(""),[d,c]=(0,l.useState)(""),[m,f]=(0,l.useState)(["",""]),[g,h]=(0,l.useState)(!0),[b,y]=(0,l.useState)(""),[v,j]=(0,l.useState)(""),[N,w]=(0,l.useState)(""),[D,S]=(0,l.useState)(null),U=new Date().toISOString().split("T")[0],k=new Date;k.setDate(k.getDate()+30);let I=k.toISOString().split("T")[0],C=(e,t)=>{let r=[...m];r[e]=t,f(r)},E=e=>{m.length<=2||f(m.filter((t,r)=>r!==e))},R=async n=>{if(n.preventDefault(),!t||!r||!d||m.some(e=>!e.trim()))return;if(m.filter(e=>e.trim()).length<2){alert("옵션은 최소 2개 이상 입력해야 합니다.");return}if(!g){if(b.length<6||b.length>12){alert("비밀번호는 6자 이상 12자 이하로 입력하세요.");return}if(b!==v){alert("비밀번호가 일치하지 않습니다.");return}}let s=m.map(e=>({id:p(),text:e.trim(),imageUrl:null,votes:[]}));await (0,a.ET)((0,a.hJ)(u.db,"polls"),{title:r,category:d,options:s,isPublic:g,password:g?null:b,deadline:new Date(N),maxParticipants:D||null,createdAt:(0,a.Bt)(),createdBy:t.uid}),e.push("/mypage")};return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto py-12 px-8 bg-white shadow-md rounded-xl",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-center mb-8",children:"\uD83D\uDCDD 투표 만들기"}),(0,s.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"공개 여부"}),(0,s.jsxs)("select",{value:g?"public":"private",onChange:e=>h("public"===e.target.value),className:"w-full px-4 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,s.jsx)("option",{value:"public",children:"공개 투표"}),(0,s.jsx)("option",{value:"private",children:"비공개 투표"})]})]}),!g&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"비밀번호 (6~12자)"}),(0,s.jsx)("input",{type:"password",value:b,onChange:e=>y(e.target.value),className:"w-full px-4 py-2 border rounded-md text-sm focus:ring-2 focus:ring-purple-500"})]}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"password",value:v,onChange:e=>j(e.target.value),className:"w-full px-4 py-2 border rounded-md text-sm focus:ring-2 focus:ring-purple-500",placeholder:"비밀번호 재입력"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"제목"}),(0,s.jsx)("input",{type:"text",value:r,onChange:e=>n(e.target.value),className:"w-full px-4 py-2 border rounded-md text-sm focus:ring-2 focus:ring-purple-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"카테고리"}),(0,s.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border rounded-md text-sm focus:ring-2 focus:ring-purple-500",required:!0,children:[(0,s.jsx)("option",{value:"",children:"-- 선택하세요 --"}),x.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"투표 옵션"}),(0,s.jsx)("div",{className:"space-y-2",children:m.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>C(t,e.target.value),className:"flex-1 px-4 py-2 border rounded-md text-sm focus:ring-2 focus:ring-purple-500",placeholder:"옵션 ".concat(t+1),required:!0}),m.length>2&&(0,s.jsxs)("button",{type:"button",onClick:()=>E(t),className:"inline-flex items-center gap-1 bg-red-50 text-red-600 text-sm px-3 py-1.5 rounded-md hover:bg-red-100 transition",children:["\uD83D\uDDD1 ",(0,s.jsx)("span",{className:"font-medium",children:"삭제"})]})]},t))}),m.length<10&&(0,s.jsx)("button",{type:"button",onClick:()=>{m.length<10&&f([...m,""])},className:"text-sm text-purple-600 mt-2 hover:underline",children:"+ 옵션 추가"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"마감일"}),(0,s.jsx)("input",{type:"date",value:N,onChange:e=>w(e.target.value),min:U,max:I,className:"w-full px-4 py-2 border rounded-md text-sm focus:ring-2 focus:ring-purple-500",required:!0}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"오늘부터 30일 이내만 설정할 수 있습니다."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"참여자 수 (선택) : 참여자 수가 참여하면 투표는 바로 마감됩니다."}),(0,s.jsx)("input",{type:"number",min:1,value:null!=D?D:"",onChange:e=>S(Number(e.target.value)),className:"w-full px-4 py-2 border rounded-md text-sm focus:ring-2 focus:ring-purple-500",placeholder:"예: 100"})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("button",{type:"submit",className:"bg-purple-600 text-white px-6 py-2 rounded-full hover:bg-purple-700 transition",children:"등록하기"})})]})]})}},2002:function(e,t,r){"use strict";r.d(t,{I:function(){return i},db:function(){return o}});var n=r(4991),s=r(7568),l=r(9277),a=r(3521);let u=(0,n.ZF)({apiKey:"AIzaSyAws91QdnLflrzzHG9Nqh6kuc-cF5fJF9w",authDomain:"myvote-d6e8a.firebaseapp.com",projectId:"myvote-d6e8a",storageBucket:"myvote-d6e8a.appspot.com",messagingSenderId:"419357195756",appId:"1:419357195756:web:861b197a9d92d06dc914c9"}),i=(0,s.v0)(u),o=(0,l.ad)(u);(0,a.cF)(u)},437:function(e,t,r){"use strict";r.d(t,{t:function(){return n}});let n=(0,r(7957).U)(e=>({user:null,loading:!0,setUser:t=>e({user:t}),setLoading:t=>e({loading:t})}))},7957:function(e,t,r){"use strict";r.d(t,{U:function(){return i}});var n=r(7954);let s=e=>{let t;let r=new Set,n=(e,n)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,l={setState:n,getState:s,getInitialState:()=>a,subscribe:e=>(r.add(e),()=>r.delete(e))},a=t=e(n,s,l);return l},l=e=>e?s(e):s,a=e=>e,u=e=>{let t=l(e),r=e=>(function(e,t=a){let r=n.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return n.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},i=e=>e?u(e):u}},function(e){e.O(0,[126,411,114,878,323,744],function(){return e(e.s=4477)}),_N_E=e.O()}]);