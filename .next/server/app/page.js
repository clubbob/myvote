(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},7578:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},7282:e=>{"use strict";e.exports=require("process")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},2940:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var s=r(3739),a=r(5208),n=r(5313),i=r.n(n),l=r(4054),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5359)),"D:\\project\\myvote\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,4969)),"D:\\project\\myvote\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7434,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\project\\myvote\\src\\app\\page.tsx"],u="/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6866:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,8237,23)),Promise.resolve().then(r.t.bind(r,9922,23)),Promise.resolve().then(r.t.bind(r,237,23)),Promise.resolve().then(r.t.bind(r,1382,23)),Promise.resolve().then(r.t.bind(r,7140,23)),Promise.resolve().then(r.t.bind(r,7759,23))},1001:(e,t,r)=>{Promise.resolve().then(r.bind(r,5272))},6004:(e,t,r)=>{Promise.resolve().then(r.bind(r,8393))},5272:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(439);r(6299);var a=r(2352),n=r(7404),i=r(1526),l=r(7505),o=r(5508),c=r(6074),d=r(6826),u=r(7718),p=r(6275);function x({children:e}){let{user:t,loading:r,setUser:x,setLoading:m}=(0,l.t)(),h=(0,u.useRouter)(),g=(0,u.usePathname)(),f=t?.email==="clubbob@naver.com",y=g.startsWith("/admin");(0,i.useEffect)(()=>{let e=(0,c.Aj)(o.auth,async e=>{if(e)try{let t=await (0,d.QT)((0,d.JU)(o.db,"users",e.uid)),r=t.exists()?t.data():{};if(!r.nickname){console.warn("닉네임 없음 - userData:",r),x(null),m(!1);return}x({uid:e.uid,email:e.email??"",nickname:r.nickname})}catch(e){console.error("사용자 정보 가져오기 실패:",e),x(null)}else x(null);m(!1)});return()=>e()},[x,m]);let v=async()=>{await (0,c.signOut)(o.auth),x(null),h.push("/login")};return s.jsx("html",{lang:"ko",children:(0,s.jsxs)("body",{className:"min-h-screen flex flex-col",children:[(0,s.jsxs)("header",{className:"bg-slate-100 px-6 py-2 shadow-md flex justify-between items-center",children:[s.jsx(a.default,{href:"/",className:"flex items-center space-x-2",children:s.jsx(n.default,{src:"/images/pollsday-logo.png",alt:"PollsDay Logo",width:140,height:40})}),s.jsx("nav",{className:"flex gap-4 text-sm font-medium text-purple-700",children:t?f&&y?(0,s.jsxs)(s.Fragment,{children:[s.jsx("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"\uD83C\uDFE0 홈페이지 보기 →"}),s.jsx(a.default,{href:"/admin/dashboard",className:"hover:underline",children:"관리자 대시보드"}),s.jsx("button",{onClick:v,className:"hover:underline",children:"로그아웃"})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("button",{onClick:()=>h.push("/polls?reset=1"),className:"hover:underline",children:"전체 투표"}),s.jsx(a.default,{href:"/create",className:"hover:underline",children:"투표 만들기"}),s.jsx(a.default,{href:"/mypage",className:"hover:underline",children:"마이페이지"}),s.jsx("button",{onClick:v,className:"hover:underline",children:"로그아웃"})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(a.default,{href:"/login",className:"hover:underline",children:"로그인"}),s.jsx(a.default,{href:"/signup",className:"hover:underline",children:"회원가입"})]})})]}),s.jsx("main",{className:"flex-1 px-6 py-8 bg-white",children:e}),s.jsx(p.x7,{position:"top-center",richColors:!0}),s.jsx("footer",{className:"bg-slate-200 text-center text-sm text-gray-600 py-4",children:"\xa9 2025 PollsDay. 참여의 힘으로 세상을 움직이다."})]})})}},8393:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(439),a=r(1526),n=r(6826),i=r(5508),l=r(7986),o=r(7718),c=r(7505);function d(){let[e,t]=(0,a.useState)([]),[r,d]=(0,a.useState)(8),u=(0,o.useRouter)(),{user:p}=(0,c.t)();(0,a.useEffect)(()=>{(async()=>{let e=(await (0,n.PL)((0,n.hJ)(i.db,"polls"))).docs.map(e=>({id:e.id,...e.data()})),r=new Date;t(e.filter(e=>{let t="string"==typeof e.deadline?new Date(e.deadline):e.deadline?.toDate?.()??null;return!1!==e.isPublic&&t&&t>r}).sort((e,t)=>{let r="string"==typeof e.createdAt?new Date(e.createdAt).getTime():e.createdAt.toDate().getTime();return("string"==typeof t.createdAt?new Date(t.createdAt).getTime():t.createdAt.toDate().getTime())-r}))})()},[]);let x=e=>{if(!p){alert("로그인 후 투표 내용을 확인할 수 있어요!"),u.push("/login");return}u.push(`/polls/${e}`)};return(0,s.jsxs)("div",{className:"bg-white min-h-screen py-10 px-4",children:[(0,s.jsxs)("section",{className:"text-center mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold text-purple-700 mb-3",children:"\uD83C\uDF89 PollsDay에 오신 걸 환영합니다!"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"함께 투표하고, 나만의 투표도 만들어 보세요."}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>{if(!p){alert("로그인 해 주세요"),u.push("/login?redirect=/create");return}u.push("/create")},className:"bg-purple-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-purple-700 transition",children:"✏️ 지금 투표 만들기"})})]}),(0,s.jsxs)("section",{className:"max-w-6xl mx-auto",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"\uD83D\uDD25 실시간 인기 투표"}),0===e.length?s.jsx("p",{className:"text-gray-400",children:"등록된 투표가 아직 없어요."}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:e.slice(0,r).map(e=>{let t="string"==typeof e.createdAt?new Date(e.createdAt):e.createdAt.toDate();return(0,s.jsxs)("div",{className:"cursor-pointer rounded-xl overflow-hidden shadow hover:ring-2 hover:ring-purple-300 transition",onClick:()=>x(e.id),children:[s.jsx("img",{src:e.mainImageUrl||"/images/default_main.jpg",alt:"대표 이미지",className:"w-full aspect-[4/3] object-cover"}),(0,s.jsxs)("div",{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-lg line-clamp-2 break-words whitespace-normal",children:e.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["\uD83D\uDCC2 ",e.category," \xb7 \uD83D\uDEE0 ",(0,l.WU)(t,"yyyy. M. d.")]})]})]},e.id)})}),r<e.length&&s.jsx("div",{className:"mt-8 text-center",children:s.jsx("button",{onClick:()=>{d(e=>e+8)},className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"더 보기"})})]})]})]})}},5508:(e,t,r)=>{"use strict";r.d(t,{auth:()=>o,db:()=>c,t:()=>d});var s=r(6564),a=r(6074),n=r(6826),i=r(8852);let l=(0,s.ZF)({apiKey:"AIzaSyAws91QdnLflrzzHG9Nqh6kuc-cF5fJF9w",authDomain:"myvote-d6e8a.firebaseapp.com",projectId:"myvote-d6e8a",storageBucket:"myvote-d6e8a.firebasestorage.app",messagingSenderId:"419357195756",appId:"1:419357195756:web:861b197a9d92d06dc914c9"}),o=(0,a.v0)(l),c=(0,n.ad)(l),d=(0,i.cF)(l,"gs://myvote-d6e8a.firebasestorage.app")},7505:(e,t,r)=>{"use strict";r.d(t,{t:()=>s});let s=(0,r(3307).U)(e=>({user:null,loading:!0,setUser:t=>e({user:t}),setLoading:t=>e({loading:t})}))},4969:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let s=(0,r(9705).createProxy)(String.raw`D:\project\myvote\src\app\layout.tsx`),{__esModule:a,$$typeof:n}=s,i=s.default},5359:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let s=(0,r(9705).createProxy)(String.raw`D:\project\myvote\src\app\page.tsx`),{__esModule:a,$$typeof:n}=s,i=s.default},6299:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[717,986],()=>r(2940));module.exports=s})();